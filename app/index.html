
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>moveSync.us</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
		<link href="css/app.css" rel="stylesheet" media="screen">
		<script src="scripts/jquery.min.js" type="text/javascript"></script>
		<script src="scripts/ocanvas-2.4.0.min.js" type="text/javascript"></script>

	</head>
 	<body>
	
	<div class="container-fluid">

	 <div class="row-fluid">
	  <div class="logo span3">
	   <a href="../index.html">
	   	<img src="assets/logo-small.png"/>
	   </a>
	  </div>
	  <div class="headInfo span9">
	   <audio controls>
		 </audio>
	  </div>
	 </div>

	</div>
   
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span4">
			
				<div id="movesync-description" style="height:600px;">
			 <div class="row-fluid songName"> Sudmali≈Üas </div> 

				</div>
			</div>
			<div class="span8">
				 <div class="example">

					 <div id="mygraphiccontainer"></div> <!-- Container for the preview of the curve line -->

				 </div>
			 </div>
		</div>
	</div>
	
	<footer>
	<div class="centered">
		<div id="garage48">
			<a href="http://garage48.org/minsk" title="Garage48.org"> <img
				src="../img/garage48.gif" width="114px">
			</a>
			<p>
				<small>movesync.us is a kick-ass project made at Garage48
					in Minsk</small>
			</p>
		</div>
		<div id="connectDiv">
			<a href="http://www.facebook.com/movesync.us" title="movesync.us on Facebook">
				<img src="../img/feisbuks.png"	class="connectImg" />
			</a>
			<a href="http://twitter.com/movesyncus"	title="movesync.us on Twitter">
				<img src="../img/tviteris.png"	class="connectImg" />
			</a>
			<a href="http://youtube.com/movesyncus"	title="movesync.us on YouTube">
				<img src="../img/youtube.png" class="connectImg" />
			</a>
		</div>
		</div>
	</footer>
	
    <script src="scripts/yui-min.js" type="text/javascript"></script>
    <script src="scripts/yui/build/yahoo/yahoo-min.js" type="text/javascript"></script>
		<script src="scripts/yui/build/event/event-min.js" type="text/javascript"></script>


    <script src="scripts/yui/build/animation/animation-min.js" type="text/javascript"></script>
		<script src="scripts/yui/build/utilities/utilities.js" type="text/javascript"></script>
	
	<script src="js/jquery-1.9.1.js"></script>
	<script src="js/bootstrap.min.js"></script>

	<script src="scripts/player.js"></script>
	<script src="scripts/model.js"></script>
	<script src="weheartgarage.js"></script>
	<script src="dance.js"></script>

	<script src="scripts/move2.js" type="text/javascript"></script>
	<script src="scripts/jquery-ui-1.10.1.custom.js" type="text/javascript"></script>
	<script src="scripts/jquery.youtubepopup.js" type="text/javascript"></script>
	<link href="css/jquery-ui-1.10.1.custom.css" rel="stylesheet" media="screen">

	<script type="text/javascript">
		var mover;
		$(document).ready(function(){
			//Empty at the begining

			//danceVar
			var dance = window.location.hash ? weHeartGarage : danceVar;

			getFramesArray = function() {
				var movementsArray = [];

				for (var i = 0; i < dance.frames.length; i++) {
					movementsArray.push(dance.frames[i].time);
				}

				return movementsArray;
			};

			highlighStep = function(param) {
				var stepId = dance.frames[param].descriptionId;
				$("div.active").removeClass("active");
				$("#description" + stepId).addClass("active");
			};

			highlightInstruction = function(frameId) {
				var stepId = dance.frames[frameId].instructionId; 
				$("div.instruction-active").removeClass("instruction-active");
				$("#instruction" + stepId).addClass("instruction-active");
			}

			fireEvent = function(param) {
				//highlighStep(param);
				highlightInstruction(param);
				var movement = dance.frames[param];

				mover.doFrame(movement);
			};

			appendMovementsToDescrArea = function() {
				var mainPlaceholder = $("#movesync-description");
				var index = 0;

				for (var i = 0; i < dance.description.length; i++) {
					var descrElem = "<div id='description" + i +"'>" + "<h1>" + dance.description[i].name + "</h1>";
					for (var j = 0; j < dance.description[i].instructions.length; j++) {
						var instructionVO = {};
						instructionVO.text = dance.description[i].instructions[j].text;
						instructionVO.from = dance.description[i].instructions[j].from;
						instructionVO.to = dance.description[i].instructions[j].to;
						descrElem = descrElem + "<div id='instruction" + dance.description[i].instructions[j].id +"'>" + instructionVO.from + " - " + instructionVO.to + ". " + instructionVO.text + "</div>";
						index +=1;
					}
					descrElem = descrElem + "</div>";
					mainPlaceholder.append(descrElem);
					
				}
				$("a.youtube").YouTubePopup();
			};

			prepareStage = function() {
				appendMovementsToDescrArea();
		        //createDancers();

		        mover.createDancers(dance.dancers);
		        //console.log("sd");
			}

			var moverReadyCallback = function() {
				prepareStage();
			}

			mover = new Mover("mygraphiccontainer", ".example", moverReadyCallback);

			movesync.player.initPlayer(getFramesArray(), fireEvent);
			
		}); 
	</script>
		<!-- In order for the script to run, this HTML markup must be nested in a
	-->


 </body>
</html>