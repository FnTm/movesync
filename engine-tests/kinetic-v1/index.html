<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>moveSync.us - dance</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="../../scripts/jquery.min.js" type="text/javascript"></script>
		<style type="text/css">
			
		</style>
	</head>
	<body>


	<div id="container">

	</div> <!-- Container for the preview of the curve line -->
	<script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>
    
	<script type="text/javascript">
		$(document).ready(function() {
			var stage = new Kinetic.Stage({
				container: 'container',
				width: 1000,
				height: 1000
			});

			var layer = new Kinetic.Layer();

			var group = new Kinetic.Group();

			var blueRect = new Kinetic.Rect({
				x: 400,
				y: 400,
				width: 100,
				height: 50,
				fill: 'blue',
				stroke: 'black',
				strokeWidth: 4
			});

			var redRect = new Kinetic.Rect({
				x: 400,
				y: 400,
				width: 100,
				height: 50,
				fill: 'red',
				stroke: 'black',
				strokeWidth: 4,
				offset: [-100, 0]
			});

			group.add(redRect);
			group.add(blueRect);
			layer.add(group);
			stage.add(layer);

			var angularSpeed = Math.PI / 2;
			var anim = new Kinetic.Animation(function(frame) {
				var angleDiff = frame.timeDiff * angularSpeed / 1000;
				redRect.rotate(angleDiff);

				var period = 2000;
				var amplitude = 100;
				group.setX(amplitude * Math.sin(frame.time * 2 * Math.PI / period) + 100);
			}, layer);

			anim.start();
		});


		var Mover = function(dance) {
			var timer;

			var redraw = function() {
				
			}

			var init = function() {
				timer = setInterval
			}
		}

		var Dance = {
			dancers : [
				{ id : "boy1", position : { X : 100, Y : 200 }, direction : { deg : 0, towards : "center" } },
				{ id : "girl1", position : { X : 300, Y : 200 }, direction : { deg : 90, towards : "front" } }
			],
			frames : [
				{
					time : 0,
					group : [],
					ungroup : [],
					move : [
						{ id : "boy1", duration : 1000, position : { X : 200, Y : 200 } },
						{ id : "girl1", duration : 1000, position : { X : 200, Y : 200 } }
					]
				},
				{
					time : 1000,
					group : [],
					ungroup : [],
					move : [
						{ id : "boy1", duration : 1000, position : { X : 100, Y : 200 } },
						{ id : "girl1", duration : 1000, position : { X : 300, Y : 200 } }
					]
				},
				{
					time : 2000,
					group : [
						{ id : "group1", frame : { X: 0, Y : 0, width : 400, height : 400 }, contains : ["boy1", "girl1"] }
					],
					ungroup : [],
					move : [
						{ id : "group1", duration : 2000, rotate : 180 }
					]
				}
			]
		}

		var mover = new Mover(Dance);
	</script>
 </body>
</html>